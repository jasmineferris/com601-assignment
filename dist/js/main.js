function searchContacts(){var e,t,o,a;for(e=document.getElementById("searchField").value.toUpperCase(),t=document.getElementById("contactsTable").getElementsByTagName("tr"),a=0;a<t.length;a++)-1<((o=t[a].getElementsByTagName("td")[0]).textContent||o.innerText).toUpperCase().indexOf(e)?t[a].style.display="":t[a].style.display="none";var l=$("table tr:visible").length;$("#numOfResults").text(l-1+" results found.")}function sortTable(){var e,t,o,a,l,n,i;for(e=document.getElementById("contactsTable"),o=!0;o;){for(o=!1,t=e.rows,a=0;a<t.length-1;a++)if(i=!1,l=t[a].getElementsByTagName("td")[0],n=t[a+1].getElementsByTagName("td")[0],l.innerHTML.toLowerCase()>n.innerHTML.toLowerCase()){i=!0;break}i&&(t[a].parentNode.insertBefore(t[a+1],t[a]),o=!0)}document.getElementById("sortBtn").style.backgroundColor="#F0136A",$("#sortBtn").text("Sorted A to Z")}function goBack(){$("#tableID").show(),$("#search").show(),$("#contactForm").hide(),$("#relatedContactsTable").empty()}$(document).ready(function(){var t;$('[data-toggle="tooltip"]').tooltip({html:!0}),$("#contactForm").hide();var o=[],a=[],l=[],n=[],d=[],s=[],c=[],r=[],m=[];$.getJSON("/getContacts",function(e){for($.each(e.contacts,function(e,t){o.push(t.id),a.push(t.first_name),l.push(t.last_name),n.push(t.gender),d.push(t.address),s.push(t.city),c.push(t.post_code),r.push(t.number),m.push(t.email)}),i=0;i<o.length;i++)$("#contactsTable").append('<tr id="'+o[i]+'" class="tablerow"><td>'+a[i]+"</td> <td>"+l[i]+"</td> <td> "+s[i]+"</td> </tr>");$(document).on("click","#contactsTable tr",function(){for($("#tableID").hide(),$("#search").hide(),console.log(this.id),t=this.id,$("#contactForm").show(),$("#firstNameField").val(a[t-1]),$("#lastNameField").val(l[t-1]),$("#genderField").val(n[t-1]),$("#addressField").val(d[t-1]),$("#cityField").val(s[t-1]),$("#postcodeField").val(c[t-1]),$("#mobileField").val(r[t-1]),$("#emailField").val(m[t-1]),i=0;i<o.length;++i)s[i]==$("#cityField").val()&&o[i]!=t&&$("#relatedContactsTable").append('<tr id="'+o[i]+'" class="tablerow"><td>'+a[i]+"</td> <td>"+l[i]+"</td> <td> "+s[i]+"</td> </tr>");$("#updateBtn").on("click",function(){a[t-1]=$("#firstNameField").val,l[t-1]=$("#lastNameField").val,n[t-1]=$("#genderField").val,d[t-1]=$("#addressField").val,s[t-1]=$("#cityField").val,c[t-1]=$("#postcodeField").val,r[t-1]=$("#mobileField").val,m[t-1]=$("#emailField").val,$("#tableID").show(),$("#search").show(),$("#contactForm").hide(),$("#relatedContactsTable").empty()}),$("#deleteBtn").on("click",function(){$("#tableID").show(),$("#search").show(),$("#contactForm").hide(),$.post("/deleteContact",{id:tablerowID},function(e){console.log("data gone")}),$("#relatedContactsTable").empty()})})}),$(document).on("mouseenter","table .tablerow",function(){$("#infoBox").show();var t,o,e=this.id,a=document.getElementById("infoBox");window.addEventListener("mousemove",function(e){t=e.clientX,o=e.clientY,void 0!==t&&(a.style.left=t+20+"px",a.style.top=o+"px")},!1),$("#infoBoxEmail").text(m[e-1])}),$(document).on("mouseleave","table .tablerow",function(){$("#infoBox").hide()}),$("#infoBox").hide()});